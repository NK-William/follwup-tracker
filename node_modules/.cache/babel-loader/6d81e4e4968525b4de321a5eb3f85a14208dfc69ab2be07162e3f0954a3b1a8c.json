{"ast":null,"code":"import{useEffect,useState}from\"react\";import getAxiosClient from\"../../util/axiosConfig\";import{trackerTaskApi}from\"../../constants/apis\";import{useParams}from\"react-router-dom\";import{taskPhaseStatus}from\"../../enums\";let noDataAfterFetch=false;export const useTaskContent=()=>{const{taskId}=useParams();const[showFullDetailsView,setShowFullDetailsView]=useState(false);const[fullDetailsViewData,setFullDetailsViewData]=useState({title:\"\",text:\"\"});const[isLoading,setIsLoading]=useState(false);const[task,setTask]=useState(undefined);const[errorMessage,setErrorMessage]=useState(null);useEffect(()=>{console.log(\"useEffect triggered\");apiFetchTrackerTask();},[taskId]);console.log(\"Task ID from URL:\",taskId);const apiFetchTrackerTask=async()=>{try{const axiosClient=getAxiosClient();setIsLoading(true);const response=await axiosClient.get(`${trackerTaskApi}/${taskId}`);console.log(\"Tracker task response:\",response.data);if(response.status===200){setTask(response.data);}else{// TODO::: Push error for tracking\nsetErrorMessage(\"An error occurred displaying tracker task\");noDataAfterFetch=true;}}catch(error){// TODO::: Push error for tracking\nsetErrorMessage(\"An error occurred displaying tracker task\");noDataAfterFetch=true;}finally{setIsLoading(false);}};const handleShowFullDetailsView=data=>{setFullDetailsViewData(data);setShowFullDetailsView(true);};const getNumberOfCompletedPhases=()=>{if(!task)return 0;const completedPhases=task.phases.filter(item=>item.status===taskPhaseStatus.Completed).length;return completedPhases;};return{taskData:task,isLoading,showFullDetailsView,fullDetailsViewData,noDataAfterFetch,errorMessage,setShowFullDetailsView,handleShowFullDetailsView,getNumberOfCompletedPhases};};","map":{"version":3,"names":["useEffect","useState","getAxiosClient","trackerTaskApi","useParams","taskPhaseStatus","noDataAfterFetch","useTaskContent","taskId","showFullDetailsView","setShowFullDetailsView","fullDetailsViewData","setFullDetailsViewData","title","text","isLoading","setIsLoading","task","setTask","undefined","errorMessage","setErrorMessage","console","log","apiFetchTrackerTask","axiosClient","response","get","data","status","error","handleShowFullDetailsView","getNumberOfCompletedPhases","completedPhases","phases","filter","item","Completed","length","taskData"],"sources":["/Users/william/Projects/React/follwup-tracker/src/components/taskContent/util.ts"],"sourcesContent":["import { IFullDetailsViewData, ITaskDTO } from \"../../interfaces\";\nimport { useEffect, useState } from \"react\";\nimport getAxiosClient from \"../../util/axiosConfig\";\nimport { trackerTaskApi } from \"../../constants/apis\";\nimport { useParams } from \"react-router-dom\";\nimport { taskPhaseStatus } from \"../../enums\";\n\nlet noDataAfterFetch = false;\n\nexport const useTaskContent = () => {\n  const { taskId } = useParams();\n  const [showFullDetailsView, setShowFullDetailsView] = useState(false);\n  const [fullDetailsViewData, setFullDetailsViewData] =\n    useState<IFullDetailsViewData>({ title: \"\", text: \"\" });\n  const [isLoading, setIsLoading] = useState(false);\n  const [task, setTask] = useState<ITaskDTO | undefined>(undefined);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n\n  useEffect(() => {\n    console.log(\"useEffect triggered\");\n    apiFetchTrackerTask();\n  }, [taskId]);\n\n  console.log(\"Task ID from URL:\", taskId);\n\n  const apiFetchTrackerTask = async () => {\n    try {\n      const axiosClient = getAxiosClient();\n      setIsLoading(true);\n      const response = await axiosClient.get(`${trackerTaskApi}/${taskId}`);\n\n      console.log(\"Tracker task response:\", response.data);\n      if (response.status === 200) {\n        setTask(response.data);\n      } else {\n        // TODO::: Push error for tracking\n        setErrorMessage(\"An error occurred displaying tracker task\");\n        noDataAfterFetch = true;\n      }\n    } catch (error) {\n      // TODO::: Push error for tracking\n      setErrorMessage(\"An error occurred displaying tracker task\");\n      noDataAfterFetch = true;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleShowFullDetailsView = (data: IFullDetailsViewData) => {\n    setFullDetailsViewData(data);\n    setShowFullDetailsView(true);\n  };\n\n  const getNumberOfCompletedPhases = () => {\n    if (!task) return 0;\n    const completedPhases = task.phases.filter(\n      (item) => item.status === taskPhaseStatus.Completed\n    ).length;\n\n    return completedPhases;\n  };\n\n  return {\n    taskData: task,\n    isLoading,\n    showFullDetailsView,\n    fullDetailsViewData,\n    noDataAfterFetch,\n    errorMessage,\n    setShowFullDetailsView,\n    handleShowFullDetailsView,\n    getNumberOfCompletedPhases,\n  };\n};\n"],"mappings":"AACA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,cAAc,KAAM,wBAAwB,CACnD,OAASC,cAAc,KAAQ,sBAAsB,CACrD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,eAAe,KAAQ,aAAa,CAE7C,GAAI,CAAAC,gBAAgB,CAAG,KAAK,CAE5B,MAAO,MAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAClC,KAAM,CAAEC,MAAO,CAAC,CAAGJ,SAAS,CAAC,CAAC,CAC9B,KAAM,CAACK,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGT,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAACU,mBAAmB,CAAEC,sBAAsB,CAAC,CACjDX,QAAQ,CAAuB,CAAEY,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAAC,CACzD,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACgB,IAAI,CAAEC,OAAO,CAAC,CAAGjB,QAAQ,CAAuBkB,SAAS,CAAC,CACjE,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGpB,QAAQ,CAAgB,IAAI,CAAC,CAErED,SAAS,CAAC,IAAM,CACdsB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAClCC,mBAAmB,CAAC,CAAC,CACvB,CAAC,CAAE,CAAChB,MAAM,CAAC,CAAC,CAEZc,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEf,MAAM,CAAC,CAExC,KAAM,CAAAgB,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,KAAM,CAAAC,WAAW,CAAGvB,cAAc,CAAC,CAAC,CACpCc,YAAY,CAAC,IAAI,CAAC,CAClB,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAAD,WAAW,CAACE,GAAG,CAAC,GAAGxB,cAAc,IAAIK,MAAM,EAAE,CAAC,CAErEc,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEG,QAAQ,CAACE,IAAI,CAAC,CACpD,GAAIF,QAAQ,CAACG,MAAM,GAAK,GAAG,CAAE,CAC3BX,OAAO,CAACQ,QAAQ,CAACE,IAAI,CAAC,CACxB,CAAC,IAAM,CACL;AACAP,eAAe,CAAC,2CAA2C,CAAC,CAC5Df,gBAAgB,CAAG,IAAI,CACzB,CACF,CAAE,MAAOwB,KAAK,CAAE,CACd;AACAT,eAAe,CAAC,2CAA2C,CAAC,CAC5Df,gBAAgB,CAAG,IAAI,CACzB,CAAC,OAAS,CACRU,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAe,yBAAyB,CAAIH,IAA0B,EAAK,CAChEhB,sBAAsB,CAACgB,IAAI,CAAC,CAC5BlB,sBAAsB,CAAC,IAAI,CAAC,CAC9B,CAAC,CAED,KAAM,CAAAsB,0BAA0B,CAAGA,CAAA,GAAM,CACvC,GAAI,CAACf,IAAI,CAAE,MAAO,EAAC,CACnB,KAAM,CAAAgB,eAAe,CAAGhB,IAAI,CAACiB,MAAM,CAACC,MAAM,CACvCC,IAAI,EAAKA,IAAI,CAACP,MAAM,GAAKxB,eAAe,CAACgC,SAC5C,CAAC,CAACC,MAAM,CAER,MAAO,CAAAL,eAAe,CACxB,CAAC,CAED,MAAO,CACLM,QAAQ,CAAEtB,IAAI,CACdF,SAAS,CACTN,mBAAmB,CACnBE,mBAAmB,CACnBL,gBAAgB,CAChBc,YAAY,CACZV,sBAAsB,CACtBqB,yBAAyB,CACzBC,0BACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}